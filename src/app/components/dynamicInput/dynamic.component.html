<div class="mb-4">
  <label
    [for]="config.name"
    class="block text-sm font-medium text-gray-700 mb-1"
  >
    {{ config.label }}
    <span *ngIf="config.required" class="text-red-500 ml-1">*</span>
  </label>

  <ng-container [ngSwitch]="config.type">
    <input
      *ngSwitchCase="'text'"
      [formControl]="control"
      [id]="config.name"
      type="text"
      [required]="config.required"
      class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-400 focus:border-transparent"
      [class.border-red-500]="isInvalid"
    />

    <input
      *ngSwitchCase="'number'"
      [formControl]="control"
      [id]="config.name"
      type="number"
      [required]="config.required"
      class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-400 focus:border-transparent"
      [class.border-red-500]="isInvalid"
    />

    <input
      *ngSwitchCase="'email'"
      [formControl]="control"
      [id]="config.name"
      type="email"
      [required]="config.required"
      class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-400 focus:border-transparent"
      [class.border-red-500]="isInvalid"
    />

    <input
      *ngSwitchCase="'password'"
      [formControl]="control"
      [id]="config.name"
      type="password"
      [required]="config.required"
      class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-400 focus:border-transparent"
      [class.border-red-500]="isInvalid"
    />

    <input
      *ngSwitchCase="'date'"
      [formControl]="control"
      [id]="config.name"
      type="date"
      [required]="config.required"
      class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-400 focus:border-transparent"
      [class.border-red-500]="isInvalid"
    />

    <div *ngSwitchCase="'checkbox'" class="flex items-center">
      <input
        [formControl]="control"
        [id]="config.name"
        type="checkbox"
        [required]="config.required"
        class="h-4 w-4 text-gray-600 focus:ring-gray-400 border-gray-300 rounded"
        [class.border-red-500]="isInvalid"
      />
      <label [for]="config.name" class="ml-2 block text-sm text-gray-900">{{
        config.label
      }}</label>
    </div>

    <div *ngSwitchCase="'radio'" class="space-y-2">
      <div *ngFor="let option of config.options" class="flex items-center">
        <input
          [formControl]="control"
          [id]="config.name + '-' + option"
          type="radio"
          [value]="option"
          [required]="config.required"
          class="h-4 w-4 text-gray-600 focus:ring-gray-400 border-gray-300"
          [class.border-red-500]="isInvalid"
        />
        <label
          [for]="config.name + '-' + option"
          class="ml-2 block text-sm text-gray-900"
          >{{ option }}</label
        >
      </div>
    </div>

    <select
      *ngSwitchCase="'select'"
      [formControl]="control"
      [id]="config.name"
      [required]="config.required"
      class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-400 focus:border-transparent"
      [class.border-red-500]="isInvalid"
    >
      <option value="" disabled selected>Select {{ config.label }}</option>
      <option *ngFor="let option of config.options" [value]="option">
        {{ option }}
      </option>
    </select>
  </ng-container>

  <div *ngIf="isInvalid" class="mt-1 text-sm text-red-600">
    <span *ngIf="control.errors?.['required']">This field is required.</span>
    <span *ngIf="control.errors?.['email']"
      >Please enter a valid email address.</span
    >
  </div>
</div>
